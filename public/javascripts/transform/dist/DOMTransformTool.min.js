function DOMTransformTool(t){DOMTransformTool.prototype._super.call(this,t)}function DOMControl(t,o,e,r,i,s){DOMControl.prototype._super.call(this,t,o,e,r,i,s),this.id=DOMControl.idPrefix+ ++DOMControl.idCounter}DOMTransformTool.prototype=new TransformTool,DOMTransformTool.prototype._super=TransformTool,DOMTransformTool.prototype.constructor=DOMTransformTool,DOMTransformTool.prototype.setControls=function(t){if(this.controls){var o=0,e=this.controls.length;for(o=0;e>o;o++)this.controls[o].undraw(this.container)}DOMTransformTool.prototype._super.prototype.setControls.call(this,t)},DOMTransformTool.prototype.shouldDraw=function(){return!0},DOMControl.idCounter=0,DOMControl.idPrefix="-dom-control-",DOMControl.prototype=new Control,DOMControl.prototype._super=Control,DOMControl.prototype.constructor=DOMControl,DOMControl.prototype.undraw=function(){var t=document.getElementById(this.id);t&&t.parentNode&&t.parentNode.removeChild(t)},DOMControl.prototype.setStyle=function(t,o){o!==!1?t.setAttribute("fill",this.tool.fillStyle):t.setAttribute("fill","none"),t.setAttribute("stroke",this.tool.strokeStyle),t.setAttribute("stroke-width",this.tool.lineWidth)},DOMControl.prototype.draw=function(t){if((null===this.drawCallback||this.drawCallback(this,t))&&!(this.size<=0)){var o=document.getElementById(this.id),e=0;switch(this.shape){case Control.SHAPE_CIRCLE:o||(o=document.createElementNS(t.namespaceURI,"circle"),o.id=this.id,o.r.baseVal.value=this.size/2,this.setStyle(o),t.appendChild(o)),o.cx.baseVal.value=this.x,o.cy.baseVal.value=this.y;break;case Control.SHAPE_SQUARE:o||(o=document.createElementNS(t.namespaceURI,"rect"),o.id=this.id,o.width.baseVal.value=this.size,o.height.baseVal.value=this.size,this.setStyle(o),t.appendChild(o)),o.x.baseVal.value=this.x-this.size/2,o.y.baseVal.value=this.y-this.size/2;break;case Control.SHAPE_BORDER:if(!o){for(o=document.createElementNS(t.namespaceURI,"polygon"),o.id=this.id,e=0;4>e;e++)o.points.appendItem(t.createSVGPoint());this.setStyle(o,!1),t.appendChild(o)}var r;if(this.tool&&this.tool.target){var i=this.tool.target,s=this.tool.endMatrix;r=o.points.getItem(0),r.x=s.x,r.y=s.y,r=o.points.getItem(1),r.x=s.x+s.a*i.width,r.y=s.y+s.b*i.width,r=o.points.getItem(2),r.x=s.x+s.a*i.width+s.c*i.height,r.y=s.y+s.d*i.height+s.b*i.width,r=o.points.getItem(3),r.x=s.x+s.c*i.height,r.y=s.y+s.d*i.height}}o&&this.tool&&(this.tool.target?o.style.display="":o.style.display="none")}};